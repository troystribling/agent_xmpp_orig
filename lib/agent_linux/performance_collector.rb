############################################################################################################
class PerformanceCollector

  ####------------------------------------------------------------------------------------------------------
  class << self
    
    #.........................................................................................................
    def did_connect(client_connection)
      AgentXmpp.log_info "PerformanceCollector.did_connect"
    end

    #.........................................................................................................
    def collect(period)
      collector = lambda do
        while true
          self.cpu_stats
          sleep(period)
        end
      end
      EventMachine.defer(collector)
    end

    #.........................................................................................................
    def cpu_stats
      AgentXmpp.log_info "PerformanceCollector.cpu_stats"
    end

    #.........................................................................................................
    def command_class
      @@command_class ||= eval("#{`uname -s`}PerformanceCommands")
    end
    
  ###------------------------------------------------------------------------------------------------------
  end
   
############################################################################################################
# SystemCommands
end
