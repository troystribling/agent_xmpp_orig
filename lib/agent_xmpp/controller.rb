##############################################################################################################
module AgentXmpp
  
  ############################################################################################################
  class Controller

    #---------------------------------------------------------------------------------------------------------
    include EventMachine::Deferrable
    #---------------------------------------------------------------------------------------------------------

    #---------------------------------------------------------------------------------------------------------
    attr_reader
    #---------------------------------------------------------------------------------------------------------
 
    #.........................................................................................................
    def initialize
    end
 
    #---------------------------------------------------------------------------------------------------------
    # actions
    #.........................................................................................................
    def execute
      AgentXmpp::logger.info "ACTION: AgentXmpp::Controller\#execute"
    end

    #.........................................................................................................
    def prev
      AgentXmpp::logger.info "ACTION: AgentXmpp::Controller\#prev"
    end

    #.........................................................................................................
    def next
      AgentXmpp::logger.info "ACTION: AgentXmpp::Controller\#next"
    end
    
    #.........................................................................................................
    def complete
      AgentXmpp::logger.info "ACTION: AgentXmpp::Controller\#complete"
    end

    #.........................................................................................................
    def cancel
      AgentXmpp::logger.info "ACTION: AgentXmpp::Controller\#cancel"
    end
    
    #---------------------------------------------------------------------------------------------------------
    # handle request
    #.........................................................................................................
    def handle_request(action, xmlns, params)
      format = Format.new(xmlns)
      self.send(action)
      self.set_deferred_status(:succeeded, format)
    end

    def respond_to(&blk)
      self.callback(&blk)
    end
    
    
  ############################################################################################################
  # Controller
  end

##############################################################################################################
# AgentXmpp
end

